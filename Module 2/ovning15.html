<!DOCTYPE html>
<html lang="sv">
    <head>
        <title>Övning 2.15 - Modul 2</title>
        <meta charset="UTF-8">
        <meta name="description" content="Övning 2.15 - Modul 2">
        <meta name="author" content="William Grandez">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- INTERNAL CSS -->
        <style>
            body {
                box-sizing: border-box;
                padding: 0em 5em;
                background-color: #011627;
                font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            }

            /* HEADER */
            h1 {
                text-align: center;
                font-size: 4rem;
                color: #6ebdfa;
                margin-bottom: 0.8em;
            }

            h2 {
                text-align: center;
                font-size: 2rem;
                color: #6ebdfa;
            }

            .paragraph {
                color: #f4e9b3;
                padding: 0em 9em;
                line-height: 1.8rem;
                word-spacing: 0.1rem;
                margin-bottom: 4em;
                text-align: center;
            }

            /* MENU */
            .menu {
                display: flex;
                justify-content: center;
                align-items: center;
            }

            a {
                color: #ec9cd2;
                text-decoration: none;
                margin-right: 1em;
                margin-bottom: 2em;
                font-size: 1.5rem;
                font-weight: bolder;
            }

            a:hover {
                text-decoration: underline;
            }

            .italic {
                font-style: italic;
            }

            /* MAIN */
            main {
                text-align: center;
            }

            /* FORM */
            form {
                display: flex;
                justify-content: center;
                align-items: center;
                flex-direction: column;
            }

            h4 {
                font-size: 1.5rem;
                color: #7dd7c6;
                margin-bottom: 1.3em;
            }

            .alertParagraph {
                color: #f4e9b3;
                margin-bottom: 3em;
                font-size: 0.9rem;
            }

            /* Inmatning */
            .inmatning {
                margin-bottom: 2em;
                color: #bdf0c0;
                word-spacing: 0.1rem;
            }

            .inmatning > textarea {
                height: 15em;
                width: 40em;
                padding: 1em 1em;
                font-size: 1rem;
                border-radius: 0.5em;
                border: none;
                font-family: 'Courier New', Courier, monospace;
            }

            /* Paragraph section */
            .formParagraph {
                color: #bdf0c0;
                font-size: 1.5rem;
            }

            .bi-bi-arrow-down-circle-fill {
                color: #7dd7c6;
            }

            /* Button Frame */
            .buttonFrame {
                margin: 1.5em 0em;
            }

            button {
                background-color: #ec9cd2;
                border-radius: 1em;
                padding: 1em 13em;
            }

            .bi-bi-power {
                background-color: #ec9cd2;
            }

            /* Output Frame */
            .jsParagraph {
                color: #bdf0c0;
                font-size: 2em;
                font-weight: bold;
            }

            /* FOOTER */
            footer {
                margin-top: 3em;
                background-color: #1f91c3;
                color: #efefef;
                text-align: center;
                font-size: 1.5rem;
                padding: 0.3em 0em;
                border-radius: 0.5em;
            }
        </style>
    </head>
    <body>
        <!-- SIDHUVUD -->
        <header>
            <h1>Modul 2</h1>
            <h2>Övning 2.15</h2>
            <p class="paragraph">
                Gör en funktion (kryptera) som krypterar en text genom att byta ut bokstäverna "o", "e", "t", och "n" till tecknen "!", "#", "%", och "&" (om du vill kan du lägga till lite fler bokstäver som byts ut). 
                Gör också en funktion (dekryptera) som byter tillbaks tecknen till klartext igen. 
                Testa och demonstrera att dina funktioner fungerar.
            </p>
            <!-- Menu -->
            <div class="menu">
                <a href="ovning7.html">Övning 2.7</a>
                <a href="ovning21.html">Övning 2.21</a>
            </div>
        </header>

         <!-- FORMULÄR -->
         <main>
            <form>
                <!-- Inmatning -->
                <h4>Dekryptera texten</h4>
                <p class="alertParagraph">OBS! Klicka på knappen två gånger!</p>

                <!-- Input Box -->
                <div class="inmatning">
                    <textarea></textarea>
                </div>

                <!-- KNAPP -->
                <p class="formParagraph">
                    Tryck på knappen
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi-bi-arrow-down-circle-fill" viewBox="0 0 16 16">
                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"/>
                    </svg>
                </p>
    
                <div class="buttonFrame">
                    <button type="button" id="knapp">
                        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi-bi-power" viewBox="0 0 16 16">
                            <path d="M7.5 1v7h1V1h-1z"/>
                            <path d="M3 8.812a4.999 4.999 0 0 1 2.578-4.375l-.485-.874A6 6 0 1 0 11 3.616l-.501.865A5 5 0 1 1 3 8.812z"/>
                        </svg>
                    </button>
                </div>
    
                <!-- TEXTBOX -->
                <div class="inputFrame">
                    <p id="ord" class="jsParagraph"></p>
                </div>
            </form>
        </main>

        <!-- SIDFOT -->
        <footer>
            <p lang="en">
                Designed and Developed by William Grandez
            </p>
        </footer>
        
        <!-- JAVASCRIPT -->
        <script>
            /* Här har jag reviderat min JavaScript kod. Detta gjorde jag pga av följande orsaker:
            (1) Enklare exekvering för att förebygga fel i koden.
            (2) Lägger till funktionen att också dekryptera texten.
            (3) Koppla till DOM */

            // Vänta på att DOM (Document Object Model) ska laddas helt innan JavaScript-koden körs
            document.addEventListener('DOMContentLoaded', function () {
                // Deklarerar variabel för att spåra om den skrivna texten för närvarande är krypterad eller inte
                let krypterad = false;

                // Funktion som ersätter angivna tecken i texten baserat på krypteringsstatus.
                function justeraText(text) {
                    if (krypterad) {
                        // Om texten för närvarande är krypterad, dekryptera den genom att ersätta alla aktuella tecken.
                        return text.replace(/!/g, 'o').replace(/#/g, 'e').replace(/%/g, 't').replace(/&/g, 'n');
                    } else {
                        // Om texten inte är krypterad, kryptera den genom att ersätta alla aktuella bokstäver.
                        return text.replace(/o/g, '!').replace(/e/g, '#').replace(/t/g, '%').replace(/n/g, '&');
                    }
                }

                // Funktion för klickandet på knappen
                document.getElementById('knapp').addEventListener('click', function () {
                    // Hämta den skrivna texten från textrutan i elementet textarea
                    let inputText = document.querySelector('.inmatning textarea').value;

                    // Modifierar den skrivna texten baserat på krypteringsstatusen
                    let omvandladText = justeraText(inputText);

                    // Växlar här krypteringsstatus
                    krypterad = !krypterad;

                    // Visar den modifierade texten i stycket med id 'ord'
                    document.getElementById('ord').textContent = omvandladText;
                });
            });
        </script>
    </body>
</html>